"""DSM-5孤独症诊断标准配置

基于医学标准的孤独症评估指标
"""

# DSM-5评估指标配置
DSM5_EVALUATION_METRICS = {
    "社交互动质量": {
        "description": "社会情感互惠性缺陷的程度",
        "subscales": {
            "社交发起": "主动发起社交互动的频率和质量",
            "社交反应": "对他人社交信号的反应性和适当性", 
            "社交维持": "维持社交互动的能力和持续性",
            "情感分享": "分享情感和兴趣的能力"
        },
        "scoring_criteria": {
            5: "严重缺陷 - 极少主动社交，不回应社交信号",
            4: "明显缺陷 - 社交发起有限，反应不当",
            3: "中度缺陷 - 可以社交但质量差，需要支持", 
            2: "轻度缺陷 - 基本社交能力，偶有困难",
            1: "无明显缺陷 - 社交互动基本正常"
        }
    },
    "沟通交流能力": {
        "description": "语言和非语言沟通的缺陷程度",
        "subscales": {
            "表达性沟通": "语言或替代方式表达需求和想法的能力",
            "接受性沟通": "理解他人语言和非语言信息的能力",
            "社交性沟通": "在社交情境中使用沟通的语用技能",
            "非语言沟通": "眼神、手势、表情等非语言沟通的使用"
        },
        "scoring_criteria": {
            5: "严重缺陷 - 无功能性沟通或仅有少量单词",
            4: "明显缺陷 - 有限的功能性语言，语用严重受损",
            3: "中度缺陷 - 基本沟通能力但语用技能差",
            2: "轻度缺陷 - 沟通基本流畅但有社交语用困难",
            1: "无明显缺陷 - 沟通能力年龄适宜"
        }
    },
    "刻板重复行为": {
        "description": "限制性重复行为模式的严重程度",
        "subscales": {
            "刻板动作": "重复的运动模式或动作的频率和强度",
            "仪式化行为": "坚持固定程序和仪式的程度",
            "狭隘兴趣": "异常强烈或限制性兴趣的程度",
            "感官行为": "异常感官兴趣或感官寻求/逃避行为"
        },
        "scoring_criteria": {
            5: "严重程度 - 重复行为严重干扰功能",
            4: "明显程度 - 重复行为明显且影响日常活动",
            3: "中度程度 - 有明显重复行为但可以中断",
            2: "轻度程度 - 偶有重复行为，影响轻微",
            1: "无或极轻微 - 很少重复行为"
        }
    },
    "感官处理能力": {
        "description": "感官信息处理的异常程度",
        "subscales": {
            "感官过敏": "对感官刺激过度敏感的程度",
            "感官寻求": "主动寻求感官刺激的行为",
            "感官调节": "调节感官输入的能力",
            "感官整合": "整合多种感官信息的能力"
        },
        "scoring_criteria": {
            5: "严重异常 - 感官问题严重影响日常功能",
            4: "明显异常 - 感官敏感性明显且经常出现",
            3: "中度异常 - 有感官处理困难需要策略支持",
            2: "轻度异常 - 偶有感官敏感但可以适应",
            1: "正常范围 - 感官处理基本正常"
        }
    },
    "情绪行为调节": {
        "description": "情绪识别、表达和调节的能力",
        "subscales": {
            "情绪识别": "识别自己和他人情绪的能力",
            "情绪表达": "适当表达情绪的能力",
            "情绪调节": "管理和调节情绪的策略和能力",
            "行为控制": "控制冲动和不当行为的能力"
        },
        "scoring_criteria": {
            5: "严重困难 - 情绪失调频繁，自伤或攻击行为",
            4: "明显困难 - 经常情绪爆发，调节能力差",
            3: "中度困难 - 情绪调节有困难但有改善空间",
            2: "轻度困难 - 大多数时候能调节情绪",
            1: "良好 - 情绪调节年龄适宜"
        }
    },
    "认知适应功能": {
        "description": "认知功能和适应性行为的水平",
        "subscales": {
            "学习能力": "学习新技能和概念的能力",
            "问题解决": "解决日常问题的能力",
            "执行功能": "计划、组织和灵活思维的能力",
            "适应性行为": "在日常环境中独立功能的能力"
        },
        "scoring_criteria": {
            5: "重度缺陷 - 明显智力障碍，适应能力极差",
            4: "中度缺陷 - 学习困难，需要大量支持",
            3: "轻度缺陷 - 学习能力有限但可训练",
            2: "边缘水平 - 认知能力基本正常但有弱项",
            1: "正常范围 - 认知和适应功能年龄适宜"
        }
    }
}

# DSM-5诊断标准
DSM5_DIAGNOSTIC_CRITERIA = {
    "core_symptoms": {
        "A": {
            "name": "社交沟通和社交互动缺陷",
            "criteria": [
                "社会情感互惠性缺陷",
                "非语言交流行为缺陷", 
                "发展、维持和理解人际关系的缺陷"
            ],
            "requirement": "必须满足所有3项"
        },
        "B": {
            "name": "限制性重复行为模式、兴趣或活动",
            "criteria": [
                "刻板或重复的动作、物体使用或言语",
                "坚持同一性、固定的常规或仪式化行为",
                "高度限制的、固定的兴趣",
                "对感官刺激的过度反应或反应不足"
            ],
            "requirement": "至少满足2项"
        }
    },
    "severity_levels": {
        "level_3": {
            "name": "需要非常大量支持",
            "social_communication": "社交沟通的严重缺陷导致功能严重受损",
            "restricted_repetitive": "缺乏灵活性，应对变化极度困难，限制性/重复行为明显干扰所有领域功能"
        },
        "level_2": {
            "name": "需要大量支持",
            "social_communication": "社交沟通有明显缺陷，即使有支持仍有社交损害",
            "restricted_repetitive": "缺乏灵活性，应对变化困难，限制性/重复行为频繁出现"
        },
        "level_1": {
            "name": "需要支持",
            "social_communication": "在没有支持的情况下，社交沟通缺陷导致明显损害",
            "restricted_repetitive": "灵活性缺乏导致一个或多个情境中的功能干扰"
        }
    },
    "additional_specifiers": {
        "intellectual_impairment": ["有", "无"],
        "language_impairment": ["有", "无"],
        "medical_genetic_condition": ["有", "无"],
        "other_neurodevelopmental": ["有", "无"],
        "catatonia": ["有", "无"]
    }
}

# DSM-5评分解释
DSM5_SCORE_INTERPRETATION = {
    "core_symptom_average": {
        "severe": {"min": 4.0, "max": 5.0, "label": "重度", "support": "需要非常大量支持"},
        "moderate": {"min": 3.0, "max": 3.9, "label": "中度", "support": "需要大量支持"},
        "mild": {"min": 2.0, "max": 2.9, "label": "轻度", "support": "需要支持"},
        "minimal": {"min": 1.0, "max": 1.9, "label": "极轻", "support": "需要最小支持"}
    },
    "functional_impact": {
        "high": "严重影响日常功能",
        "moderate": "明显影响日常功能",
        "low": "轻度影响日常功能",
        "minimal": "轻微或不影响日常功能"
    }
}