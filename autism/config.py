"""孤独症儿童评估相关配置"""

# 基于DSM-5标准的场景配置
CLINICAL_SCENE_CONFIG = {
    "结构化教学环境": {
        "roles": ["孤独症儿童", "特殊教育老师", "同班同学", "教学助理", "评估师"],
        "target": "观察孤独症儿童在结构化教学环境中的社交沟通行为和适应性表现",
        "desc": "🏫 结构化教学环境（基于TEACCH教学法）",
        "activities": [
            "个别化教学任务", "视觉提示学习", "社交故事训练", 
            "轮流活动练习", "日程表使用训练", "工作系统操作"
        ],
        "triggers": [
            "日程突然改变", "新任务引入", "社交要求增加", 
            "感官刺激过载", "规则变化", "时间压力"
        ],
        "observation_points": [
            "对结构化提示的反应", "任务转换能力", "社交主动性",
            "重复行为频率", "情绪调节表现", "沟通功能性"
        ]
    },
    "自然社交情境": {
        "roles": ["孤独症儿童", "典型发育同伴", "社交技能治疗师", "观察员", "家长"],
        "target": "评估孤独症儿童在自然社交环境中的互动模式和社交认知能力",
        "desc": "👥 自然社交情境（同伴互动观察）", 
        "activities": [
            "自由游戏时间", "合作游戏任务", "角色扮演游戏",
            "分享活动", "冲突解决情境", "集体讨论"
        ],
        "triggers": [
            "同伴拒绝", "游戏规则争议", "注意力竞争",
            "身体接触要求", "情绪表达需求", "帮助请求"
        ],
        "observation_points": [
            "社交主动发起", "非语言沟通", "情绪理解",
            "游戏技能", "冲突处理", "友谊建立"
        ]
    },
    "感官调节环境": {
        "roles": ["孤独症儿童", "职业治疗师", "感统训练师", "护理人员", "评估专家"],
        "target": "观察孤独症儿童的感官处理模式和自我调节策略",
        "desc": "🌈 感官调节环境（感觉统合评估）",
        "activities": [
            "感官探索活动", "深压觉输入", "前庭刺激训练",
            "精细动作练习", "感官休息时间", "适应性行为训练"
        ],
        "triggers": [
            "噪音刺激", "光线变化", "质地变化",
            "运动要求", "拥挤环境", "多重感官输入"
        ],
        "observation_points": [
            "感官寻求行为", "感官逃避反应", "自我调节策略",
            "适应性行为", "注意力集中", "情绪稳定性"
        ]
    },
    "日常生活技能": {
        "roles": ["孤独症儿童", "生活技能训练师", "家庭成员", "康复师", "行为分析师"],
        "target": "评估孤独症儿童在日常生活技能方面的独立性和适应能力",
        "desc": "🏠 日常生活技能训练环境",
        "activities": [
            "自理技能练习", "家务参与", "购物模拟",
            "时间管理", "安全意识训练", "社区适应"
        ],
        "triggers": [
            "程序被打断", "新环境适应", "选择要求",
            "时间限制", "独立要求", "问题解决需求"
        ],
        "observation_points": [
            "独立性水平", "指令理解", "问题解决",
            "灵活性表现", "安全意识", "自我倡导"
        ]
    },
    "语言沟通评估": {
        "roles": ["孤独症儿童", "语言治疗师", "沟通伙伴", "评估师", "技术支持"],
        "target": "专门评估孤独症儿童的语言沟通能力和替代沟通使用",
        "desc": "💬 语言沟通专项评估环境",
        "activities": [
            "语言表达训练", "理解能力测试", "非语言沟通",
            "AAC设备使用", "社交语言练习", "叙事能力评估"
        ],
        "triggers": [
            "复杂指令", "抽象概念", "情绪表达要求",
            "社交语言需求", "新词汇学习", "语用技能挑战"
        ],
        "observation_points": [
            "表达性语言", "接受性语言", "语用技能",
            "非语言沟通", "沟通意图", "对话技能"
        ]
    }
}

# 基于医学标准的孤独症严重程度分级
CLINICAL_AUTISM_PROFILES = {
    "需要支持（轻度）": {
        "social_communication": 3,  # 社交沟通缺陷程度 (1-5, 5为最严重)
        "restricted_repetitive": 2,  # 刻板重复行为程度
        "sensory_processing": 3,     # 感官处理异常
        "cognitive_function": 4,     # 认知功能水平
        "adaptive_behavior": 3,      # 适应行为能力
        "language_level": 4,         # 语言发展水平
        "special_interests": "数学计算、交通工具、地图",
        "support_needs": "最小支持",
        "dsm5_severity": "需要支持"
    },
    "需要大量支持（中度）": {
        "social_communication": 4,
        "restricted_repetitive": 4,
        "sensory_processing": 4,
        "cognitive_function": 2,
        "adaptive_behavior": 2,
        "language_level": 2,
        "special_interests": "旋转物体、特定音乐、重复动作",
        "support_needs": "大量支持",
        "dsm5_severity": "需要大量支持"
    },
    "需要非常大量支持（重度）": {
        "social_communication": 5,
        "restricted_repetitive": 5,
        "sensory_processing": 5,
        "cognitive_function": 1,
        "adaptive_behavior": 1,
        "language_level": 1,
        "special_interests": "光影变化、自我刺激行为、重复发声",
        "support_needs": "非常大量支持",
        "dsm5_severity": "需要非常大量支持"
    },
    "阿斯伯格样表现": {
        "social_communication": 3,
        "restricted_repetitive": 3,
        "sensory_processing": 4,
        "cognitive_function": 5,
        "adaptive_behavior": 3,
        "language_level": 4,
        "special_interests": "科学、历史、编程、收集",
        "support_needs": "部分支持",
        "dsm5_severity": "需要支持（高功能）"
    },
    "共患ADHD": {
        "social_communication": 3,
        "restricted_repetitive": 3,
        "sensory_processing": 4,
        "cognitive_function": 3,
        "adaptive_behavior": 2,
        "language_level": 3,
        "special_interests": "运动、游戏、动态活动",
        "support_needs": "中等支持",
        "dsm5_severity": "需要支持+注意缺陷多动障碍"
    }
}

# 基于CARS、ABC、SCQ等量表的综合评估指标
CLINICAL_EVALUATION_METRICS = {
    "社交互动质量": {
        "description": "社会情感互惠性缺陷的程度",
        "subscales": {
            "社交发起": "主动发起社交互动的频率和质量",
            "社交反应": "对他人社交信号的反应性和适当性", 
            "社交维持": "维持社交互动的能力和持续性",
            "情感分享": "分享情感和兴趣的能力"
        },
        "scoring_criteria": {
            5: "严重缺陷 - 极少主动社交，不回应社交信号",
            4: "明显缺陷 - 社交发起有限，反应不当",
            3: "中度缺陷 - 可以社交但质量差，需要支持", 
            2: "轻度缺陷 - 基本社交能力，偶有困难",
            1: "无明显缺陷 - 社交互动基本正常"
        }
    },
    "沟通交流能力": {
        "description": "语言和非语言沟通的缺陷程度",
        "subscales": {
            "表达性沟通": "语言或替代方式表达需求和想法的能力",
            "接受性沟通": "理解他人语言和非语言信息的能力",
            "社交性沟通": "在社交情境中使用沟通的语用技能",
            "非语言沟通": "眼神、手势、表情等非语言沟通的使用"
        },
        "scoring_criteria": {
            5: "严重缺陷 - 无功能性沟通或仅有少量单词",
            4: "明显缺陷 - 有限的功能性语言，语用严重受损",
            3: "中度缺陷 - 基本沟通能力但语用技能差",
            2: "轻度缺陷 - 沟通基本流畅但有社交语用困难",
            1: "无明显缺陷 - 沟通能力年龄适宜"
        }
    },
    "刻板重复行为": {
        "description": "限制性重复行为模式的严重程度",
        "subscales": {
            "刻板动作": "重复的运动模式或动作的频率和强度",
            "仪式化行为": "坚持固定程序和仪式的程度",
            "狭隘兴趣": "异常强烈或限制性兴趣的程度",
            "感官行为": "异常感官兴趣或感官寻求/逃避行为"
        },
        "scoring_criteria": {
            5: "严重程度 - 重复行为严重干扰功能",
            4: "明显程度 - 重复行为明显且影响日常活动",
            3: "中度程度 - 有明显重复行为但可以中断",
            2: "轻度程度 - 偶有重复行为，影响轻微",
            1: "无或极轻微 - 很少重复行为"
        }
    },
    "感官处理能力": {
        "description": "感官信息处理的异常程度",
        "subscales": {
            "感官过敏": "对感官刺激过度敏感的程度",
            "感官寻求": "主动寻求感官刺激的行为",
            "感官调节": "调节感官输入的能力",
            "感官整合": "整合多种感官信息的能力"
        },
        "scoring_criteria": {
            5: "严重异常 - 感官问题严重影响日常功能",
            4: "明显异常 - 感官敏感性明显且经常出现",
            3: "中度异常 - 有感官处理困难需要策略支持",
            2: "轻度异常 - 偶有感官敏感但可以适应",
            1: "正常范围 - 感官处理基本正常"
        }
    },
    "情绪行为调节": {
        "description": "情绪识别、表达和调节的能力",
        "subscales": {
            "情绪识别": "识别自己和他人情绪的能力",
            "情绪表达": "适当表达情绪的能力",
            "情绪调节": "管理和调节情绪的策略和能力",
            "行为控制": "控制冲动和不当行为的能力"
        },
        "scoring_criteria": {
            5: "严重困难 - 情绪失调频繁，自伤或攻击行为",
            4: "明显困难 - 经常情绪爆发，调节能力差",
            3: "中度困难 - 情绪调节有困难但有改善空间",
            2: "轻度困难 - 大多数时候能调节情绪",
            1: "良好 - 情绪调节年龄适宜"
        }
    },
    "认知适应功能": {
        "description": "认知功能和适应性行为的水平",
        "subscales": {
            "学习能力": "学习新技能和概念的能力",
            "问题解决": "解决日常问题的能力",
            "执行功能": "计划、组织和灵活思维的能力",
            "适应性行为": "在日常环境中独立功能的能力"
        },
        "scoring_criteria": {
            5: "重度缺陷 - 明显智力障碍，适应能力极差",
            4: "中度缺陷 - 学习困难，需要大量支持",
            3: "轻度缺陷 - 学习能力有限但可训练",
            2: "边缘水平 - 认知能力基本正常但有弱项",
            1: "正常范围 - 认知和适应功能年龄适宜"
        }
    }
}